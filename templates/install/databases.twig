{% from 'macros.html.twig' import button, table %}
<h3>{{'Test of the connection at the database'|trans}}</h3>
{% if connect_error %}
    <p>Can't connect to the database</p>
    <p>The server answered: {{ connect_error }}</p>
    <div class="buttons">
        <form action='install.php?step=4' method='post'>
            {{button('submit', 'Back')}}
        </form>
    </div>
{% else %}
<h3>Database connection successful</h3>
    {% if not ver_too_old %} {# if <p></p> else <p></p> plus clair que <p> if else </p> #}
        <p>Database version seems correct {{version}} - Perfect!</p>
        <form action='install.php?step=6' method='post'>
        {% if action == 'install' %}
            <p>Please select a database:</p>


            {{table(
                { post_name: "databasename"}, 
                {   
                    args: [{sortable: "true"}, {sortable: "true"}, {sortable: "true"}, {sortable: "true"}, {radio: "true"}],
                    titles: ['name', 'table count', 'creation date', 'last update', 'select']
                },
                {
                    args: [],
                    rows: databases
                }
                )}}






                
                {# {% for database in databases %}
                    <input type='radio' name='databasename' required value={{database}}>
                    <label for='databasename'>{{database}}</label>
                {% endfor %}
                <input type='radio' name='databasename' checked value=''>
                <label for='databasename'>Create a new database or use an existing one:</label>
                <input type='text' name='newdatabasename'></input> #}
        {% elseif action == 'update' %}
            <p>Please select the database to update:</p>
                {% for database in databases %}
                    <input type='radio' name='databasename' value={{database}}>
                    <label for='databasename'>{{database}}</label>
                {% endfor %}
        {% endif %}
            <div class="buttons">{{button('submit', 'Continue')}}</div>
        </form>
    {% else %}
        <p>Your database engine version seems too old: {{version}}.</p>
    {% endif %}
{% endif %}

