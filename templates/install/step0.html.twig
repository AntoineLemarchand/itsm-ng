{% from 'macros.html.twig' import button %}
<h3>{{'Checking of the compatibility of your environment with the execution of GLPI'|trans}}</h3>
    <div class="fresh-table full-color-orange">
        <table id="table" class="table"  data-toggle="table" 
          data-search="true" data-height="1px" data-show-export="true">
            <thead>
                <th data-field="test">Test done</th>
                <th data-sortable="true" data-field="result">{{'Results'|trans}}</th>
            </thead>
            <tbody>
                {% for requirement in requirements %}
                    <tr>
                        <td>
                        {% if not requirement.validated %}
                            <div class="required2">
                                {{requirement.title|trans}}
                                <p class="required-message">{{requirement.message|trans|raw}}</p>
                            </div>
                        {% else %}
                            {{requirement.title|trans}}
                        {% endif %}
                        </td>
                        <td class="chip">
                                {% if requirement.validated %}
                                        <div class="chip validated"><i class="fas fa-check"></i><p>Checked</p></div>
                                    {% elseif requirement.optional %}
                                        <div class="chip optional"><i class="fas fa-exclamation-triangle"></i><p>Recommended</p></div>
                                    {% elseif requirement.required %}
                                        <div class="chip required"><i class="fas fa-times"></i><p>Required</p></div>
                                {% endif %}
                                {% if not requirement.validated %} 
                                <p class="required-message transparent">{{requirement.message|trans|raw}}</p>
                                {% endif %}
                            </td>
                    </tr>
                    
                {% endfor %}
            </tbody>
        </table>
    </div>
        <h3>{{'Do you want to continue?'|trans}}</h3>
    {% if passed == 0 %} {# 0 is good, 1 is missing optional, 2 is missing required #}
        <div class="buttons">
            <form action="install.php?step=4" method="post">
                <button type="submit">Continue</button>
            </form>
        </div>
    {% elseif passed == 1 %}
            <div class="buttons">
                <form action="install.php?step=3" method="post">
                    {{button('submit', 'Try again'|trans)}}
                </form>
                <form action="install.php?step=4" method="post">
                    {{button('submit', 'Continue'|trans)}}
                </form>
            </div>
    {% else %}
        <div class="buttons">
            <form action="install.php?step=3" method="post">
                {{button('submit', 'Try again'|trans)}}
            </form>
        </div>
    {% endif %}